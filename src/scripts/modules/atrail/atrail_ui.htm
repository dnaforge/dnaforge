<div class="section" id="atrail" data-title="A-Trail">
    <div class="d-flex flex-wrap">
        <div class="group">
            <ul style="list-style-type:none;">
                <li>
                    <button class="ribbon-button" id="atrail-generate-wires" data-role="hint" data-hint-position="right"
                        data-hint-text="Generate an A-Trail routing. This can take a while.">
                        <span class="mif-play mif-1x"></span>
                        <span class="caption">Generate<br>A-trail</span>
                    </button>
                </li>
                <li>
                    <button class="button"
                        onclick="Metro.dialog.open('#atrail-dialog'); $('#atrail-dialog-text').focus()" data-role="hint"
                        data-hint-position="right"
                        data-hint-text="Generate a routing along a set of vertex indices.">Upload trail</button>
                </li>
            </ul>
            <ul style="list-style-type:none;">
                <li>
                    <button class="ribbon-button" id="atrail-generate-cylinders" data-role="hint"
                        data-hint-position="right"
                        data-hint-text="Generate a cylinder model based on the current routing.">
                        <span class="mif-loop2 mif-1x"></span>
                        <span class="caption">Generate<br>Cylinders</span>
                    </button>
                </li>
                <li>
                    <button class="button" data-role="hint" id="atrail-reinforce-cylinders" data-hint-position="right"
                        data-hint-text="Reinforce selected cylinders.">Reinforce</button>
                </li>
            </ul>
            <span class="title">Main</span>
        </div>
        <div class="group">
            <ul style="list-style-type:none;">
                <li data-role="hint" data-hint-position="right" data-hint-text="Toggle visibility of the routing.">
                    <input checked type="checkbox" data-role="switch" data-caption="Wires" id="atrail-toggle-wires">
                </li>
                <li data-role="hint" data-hint-position="right"
                    data-hint-text="Toggle visibility of the cylinder model.">
                    <input type="checkbox" data-role="switch" data-caption="Cylinders" id="atrail-toggle-cylinders">
                </li>
                <li data-role="hint" data-hint-position="right"
                    data-hint-text="Toggle visibility of the nucleotide model.">
                    <input checked type="checkbox" data-role="switch" data-caption="Nucleotides"
                        id="atrail-toggle-nucleotides">
                </li>
            </ul>
            <span class="title">Visibility</span>
        </div>
        <div class="group">
            <ul style="list-style-type:none;">
                <li data-role="hint" data-hint-position="right"
                    data-hint-text="Input scale in nanometers. This is the edge length of each grid square."><input
                        type="number" data-role="input" data-default-value="15" min="0.01" max="1000" step="0.01"
                        data-size="225" data-prepend="Scale" data-append="nm" id="atrail-scale">
                </li>
                <li data-role="hint" data-hint-position="right" data-hint-text="Scaffold strand primary structure.">
                    <select data-prepend="Scaffold" data-role="select" id="atrail-scaffold">
                        <optgroup label="Scaffold strand">
                            <option value="none">Blank</option>
                            <option value="m13mp18">M13mp18 (7249)</option>
                            <option value="p7560">p7560 (7560)</option>
                            <option value="p8064">p8064 (8064)</option>
                            <option value="p8634">p8634 (8634)</option>
                            <option value="p7308">p7308 (7308)</option>
                            <option value="p7704">p7704 (7704)</option>
                            <option value="p8100">p8100 (8100)</option>
                            <option value="random">Random</option>
                            <option value="custom">Custom</option>
                        </optgroup>
                    </select>
                </li>
                <li data-role="hint" data-hint-position="right"
                    data-hint-text="Separate linker strands with strand gaps. If off, linker strands will form long cycles.">
                    <input checked type="checkbox" data-role="checkbox" data-caption="Add strand gaps"
                        id="atrail-add-nicks">
                </li>
            </ul>

            <button class="ribbon-button" onclick="Metro.dialog.open('#atrail-settings');" data-role="hint"
                data-hint-position="right" data-hint-text="Additional A-Trail settings.">
                <span class="mif-cogs mif-4x"></span>
                <span class="caption">Additional<br>Parameters</span>
            </button>
            <span class="title">Parameters</span>
        </div>
        <div class="group">
            <button class="ribbon-button" id="atrail-relax" data-role="hint" data-hint-position="right"
                data-hint-text="Try to relax the cylinder model by rotating individual cylinders to minimise the length of linker segments.">
                <span class="mif-shrink2 mif-4x"></span>
                <span class="caption">Relax<br>Cylinder<br>model</span>
            </button>
            <button class="ribbon-button" id="atrail-generate-nucleotides" data-role="hint" data-hint-position="right"
                data-hint-text="Generate a nucleotide model based on the current cylinder model. Also assigns bases identities if the scaffold strand is defined.">
                <span class="mif-shuffle mif-4x"></span>
                <span class="caption">Generate<br>nucleotide<br>model</span>
            </button>
            <span class="title">Generation</span>
        </div>
        <div class="group">

            <ul style="list-style-type:none;">
                <li>
                    <button class="button w-100" id="atrail-download-unf" data-role="hint" data-hint-position="right"
                        data-hint-text="Download the current nucleotide model as a Unified Nanotechnology Format file.">
                        <span class="mif-download mif-2x"></span>
                        <span class="caption">Download UNF</span>
                    </button>
                </li>
                <li>
                    <button class="button w-100" id="atrail-download-ox" data-role="hint" data-hint-position="right"
                        data-hint-text="Download the current nucleotide model as oxDNA files.">
                        <span class="mif-download mif-2x"></span>
                        <span class="caption">Download oxDNA</span>
                    </button>
                </li>
                <li>
                    <button class="button w-100" id="atrail-download-strands" data-role="hint"
                        data-hint-position="right" data-hint-text="Download the primary structure.">
                        <span class="mif-download mif-2x"></span>
                        <span class="caption">Download Strands</span>
                    </button>
                </li>
            </ul>
            <span class="title">Download</span>
        </div>
        <div class="group">
            <ul style="list-style-type: none;">
                <li>
                    <h4>Source:</h4>
                </li>
                <li><a href="https://doi.org/10.1038/nature14586"><span class="mif-file-text icon"></span> DNA rendering
                        of polyhedral meshes at the nanoscale</a></li>
            </ul>
        </div>
    </div>
</div>
<div class="dialog" data-role="dialog" id="atrail-dialog">
    <div class="dialog-title">Input trail</div>
    <div class="dialog-content">
        <span>The trail should be a list of vertices separated by spaces.</span>
        <textarea data-role="textarea" id="atrail-dialog-text" data-auto-size="false"></textarea>
    </div>
    <div class="dialog-actions">
        <button class="button js-dialog-close">Cancel</button>
        <button class="button primary js-dialog-close" id="atrail-dialog-confirm">Set trail</button>
    </div>
</div>
<div class="dialog" data-role="dialog" id="atrail-scaffold-dialog">
    <div class="dialog-title">Input a custom scaffold</div>
    <div class="dialog-content">
        <textarea data-role="textarea" data-chars-counter="#atrail-chars-counter"
            data-chars-counter-template="Length $1 bases" id="atrail-scaffold-dialog-text"
            data-auto-size="false"></textarea>
        <p id="atrail-chars-counter">Length: 0 bases</p>
    </div>
    <div class="dialog-actions">
        <button class="button js-dialog-close">Cancel</button>
        <button class="button primary js-dialog-close" id="atrail-scaffold-dialog-confirm">Set Scaffold</button>
    </div>
</div>

<div class="dialog" data-role="dialog" id="atrail-settings">
    <div class="dialog-title">A-Trail parameters</div>
    <div class="dialog-content" style="overflow-y: scroll;">
        <p>Routing parameters:</p>
        <ul class="group-list">
            <li data-role="hint" data-hint-position="right"
                data-hint-text="Make the graph Eulerian by using checkerboard-colouring. Otherwise use the Maximum Matching algorithm.">
                <input type="checkbox" data-role="checkbox" data-caption="Checkerboard" id="atrail-checkerboard">
            </li>
            <li data-role="hint" data-hint-position="right"
                data-hint-text="Bring cylinders as close to the vertex as possible.">
                <input checked type="checkbox" data-role="checkbox" data-caption="Greedy vertices" id="atrail-greedy">
            </li>
        </ul>
        <p>Strand parameters:</p>
        <ul class="group-list">
            <li hidden data-role="hint" data-hint-position="right"
                data-hint-text="Proportion of G's and C's in the randomly generated primary structure."><input
                    type="number" data-role="input" data-default-value="50" data-prepend="GC-content" data-append="%"
                    id="atrail-gc-content"></li>
            <li data-role="hint" data-hint-position="right" data-hint-text="Maximum staple length in nucleotides.">
                <input type="number" data-role="input" data-default-value="100" data-prepend="Max staple length"
                    id="atrail-strand-length-max">
            </li>
            <li data-role="hint" data-hint-position="right"
                data-hint-text="Minimum length of a continuous double helix without strand gaps."><input type="number"
                    data-role="input" data-default-value="10" data-prepend="Min overlap" id="atrail-strand-length-min">
            </li>
            <li data-role="hint" data-hint-position="right"
                data-hint-text="Minimum number of linker nucleotides generated between each stem segment."><input
                    type="number" data-role="input" data-default-value="3" data-prepend="Min Linkers"
                    id="atrail-linkers-min"></li>
            <li data-role="hint" data-hint-position="right"
                data-hint-text="Maximum number of linker nucleotides generated between each stem segment."><input
                    type="number" data-role="input" data-default-value="3" data-prepend="Max Linkers"
                    id="atrail-linkers-max"></li>
            <li data-role="hint" data-hint-position="right"
                data-hint-text="Offset for the scaffold. Ignore this many bases from scaffold start.">
                <input type="number" data-role="input" data-default-value="0" data-prepend="Offset"
                    id="atrail-scaffold-offset">
            </li>
            <li data-role="hint" data-hint-position="right"
                data-hint-text="ID of the first nucleotide in the scaffold strand.">
                <input type="number" data-role="input" data-default-value="0" data-prepend="5' ID"
                    id="atrail-scaffold-start">
        </ul>
        <p>Relaxation parameters:</p>
        <ul class="group-list">
            <li hidden data-role="hint" data-hint-position="right"
                data-hint-text="Number of relaxation simulation iterations."><input type="number" data-role="input"
                    data-default-value="50" data-prepend="GC-content" data-append="%" id="atrail-relax-iterations"></li>
            <li data-role="hint" data-hint-position="right"
                data-hint-text="Add springs between the 3d-model and cylinders.">
                <input checked type="checkbox" data-role="checkbox" data-caption="Floor Constraints"
                    id="atrail-floor-constraints">
            </li>
            <li data-role="hint" data-hint-position="right"
                data-hint-text="Add springs between cylinders in bundles, e.g. reinforced cylinders or doubled edges.">
                <input checked type="checkbox" data-role="checkbox" data-caption="Bundle Constraints"
                    id="atrail-bundle-constraints">
            </li>
            <li data-role="hint" data-hint-position="right"
                data-hint-text="Add springs between 3'- and 5'-primes of neighbouring cylinders.">
                <input checked type="checkbox" data-role="checkbox" data-caption="Spring Constraints"
                    id="atrail-spring-constraints">
            </li>
        </ul>
    </div>
    <div class="dialog-actions">
        <button class="button js-dialog-close">Close</button>
    </div>
</div>